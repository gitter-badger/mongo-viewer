"use strict";angular.module("App",["ui.router","ngMaterial","app.controllers","app.filters","app.services","templates"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){o.html5Mode(!0),t.otherwise("/"),e.state("homepage",{url:"/"}),e.state("database",{url:"/:database",templateUrl:"database.html",controller:"DatabaseCtrl"}),e.state("database.collection",{url:"/:collection",parent:"database",templateUrl:"collection.html",controller:"CollectionCtrl"})}]),angular.module("app.controllers",[]),angular.module("app.controllers").controller("AppCtrl",["$rootScope","$scope","$mdSidenav","$state","Databases",function(e,t,o,a,n){t.toggleSidenav=function(e){o(e).toggle()},e.server="localhost",e.database=null,e.collection=null,t.databases=[],n.get().$promise.then(function(e){t.databases=e.databases}),e.go=function(e,t){a.go(e,t)}}]),angular.module("app.controllers").controller("CollectionCtrl",["$rootScope","$scope","Model","$stateParams","$mdDialog","$mdSidenav",function(e,t,o,a,n,l){e.collection=a.collection,t.data=[],l("left").close(),o.query({database:e.database,collection:e.collection}).$promise.then(function(e){t.data=e}),t.showConfirm=function(t,a){var l=n.confirm().title("Are you sure you want to delete this entry?").content("You will not be able to cancel it.").ok("Delete").cancel("Cancel").targetEvent(t);n.show(l).then(function(){console.log("Delete the object "+a),o["delete"]({database:e.database,collection:e.collection,id:a}).$promise.then(function(e){console.log("ok",e)})})},t.newEntry=function(e){n.show({controller:c,templateUrl:"dialogNewEntry.html",targetEvent:e}).then(function(e){t.data.push(e.data)},function(){})};var c=["$scope","$mdDialog","Model",function(t,o,a){t.newObject={name:"ron",occupation:"coder"},t.cancel=function(){o.cancel()},t.save=function(){a.save({database:e.database,collection:e.collection},t.newObject).$promise.then(function(e){o.hide(e)})}}]}]).directive("jsonTextarea",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,a){a.$formatters.push(function(e){return JSON.stringify(e,void 0,2)}),a.$parsers.push(function(e){try{var t=JSON.parse(e);return a.$setValidity("json",!0),t}catch(o){return void a.$setValidity("json",!1)}})}}}),angular.module("app.controllers").controller("DatabaseCtrl",["$rootScope","$scope","Collections","$stateParams",function(e,t,o,a){e.database=a.database,t.collections=[],o.get({database:e.database}).$promise.then(function(o){t.collections=o.collections,e.collection=t.collections[0]?t.collections[0].name:null,e.collection&&e.go("database.collection",{collection:e.collection})})}]),angular.module("app.filters",[]).filter("json",function(){return function(e){return JSON.stringify(e,void 0,2)}}),angular.module("app.services",["ngResource"]).factory("Databases",["$resource",function(e){return e("/api/databases")}]).factory("Collections",["$resource",function(e){return e("/api/collections/:database",{database:"@database"})}]).factory("Model",["$resource",function(e){return e("/api/model/:database/:collection/:id",{database:"@database",collection:"@collection",id:"@id"})}]);